import React from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { updateLegend, updateMap } from '../../../modules/gisMenu';
import { updateLoading } from '../../../modules/common';

import MapListItem from './MapListItem';

import '../scss/MapSelectBox.scss';

const MAP_LIST = [
  {
    name: '유량',
    id: 'flux',
    icon: (
      <svg viewBox="0 0 33.736 22.489">
        <path
          d="M32.927,82.785a6.766,6.766,0,0,1-3.392-1.341,2.271,2.271,0,0,0-2.824,0,7.339,7.339,0,0,1-8.535-.088,2.174,2.174,0,0,0-2.736.105,7.342,7.342,0,0,1-8.506-.1,2.208,2.208,0,0,0-2.759.117A6.642,6.642,0,0,1,.8,82.791a.91.91,0,0,0-.8.92V85.6a.925.925,0,0,0,.978.937,10.528,10.528,0,0,0,4.651-1.517,11.232,11.232,0,0,0,11.247,0,11.232,11.232,0,0,0,11.247,0,10.829,10.829,0,0,0,4.634,1.511.925.925,0,0,0,.978-.937V83.74A.94.94,0,0,0,32.927,82.785Zm0-8.436a6.766,6.766,0,0,1-3.392-1.341,2.271,2.271,0,0,0-2.824,0,7.339,7.339,0,0,1-8.535-.088,2.174,2.174,0,0,0-2.736.105,7.342,7.342,0,0,1-8.506-.1,2.208,2.208,0,0,0-2.759.117A6.642,6.642,0,0,1,.8,74.356a.91.91,0,0,0-.8.92v1.886a.925.925,0,0,0,.978.937,10.528,10.528,0,0,0,4.651-1.517,11.232,11.232,0,0,0,11.247,0,11.232,11.232,0,0,0,11.247,0,10.829,10.829,0,0,0,4.634,1.511.925.925,0,0,0,.978-.937V75.3a.94.94,0,0,0-.808-.955Zm0-8.436a6.819,6.819,0,0,1-3.392-1.341,2.271,2.271,0,0,0-2.824,0,7.339,7.339,0,0,1-8.535-.088,2.174,2.174,0,0,0-2.736.105,7.342,7.342,0,0,1-8.506-.1,2.208,2.208,0,0,0-2.759.117A6.642,6.642,0,0,1,.8,65.92a.91.91,0,0,0-.8.92v1.886a.925.925,0,0,0,.978.937,10.528,10.528,0,0,0,4.651-1.517,11.232,11.232,0,0,0,11.247,0,11.232,11.232,0,0,0,11.247,0,10.829,10.829,0,0,0,4.634,1.511.925.925,0,0,0,.978-.937V66.869a.94.94,0,0,0-.808-.955Z"
          transform="translate(0 -64.048)"
        />
      </svg>
    ),
  },
  {
    name: '수질',
    id: 'quality',
    icon: (
      <svg viewBox="0 0 18.086 26.307">
        <path
          d="M10.544,1.135a1.56,1.56,0,0,0-3,0C5.139,9.241,0,11.443,0,17.157a9.092,9.092,0,0,0,9.043,9.151,9.092,9.092,0,0,0,9.043-9.151C18.086,11.415,12.959,9.278,10.544,1.135Zm-1.5,21.884a5.762,5.762,0,0,1-5.755-5.755.822.822,0,1,1,1.644,0,4.115,4.115,0,0,0,4.11,4.111.822.822,0,0,1,0,1.644Z"
          transform="translate(0 0)"
        />
      </svg>
    ),
  },
  {
    name: '악취',
    id: 'foulOder',
    icon: (
      <svg viewBox="0 0 27.075 27.075">
        <path
          d="M13.537,8A13.537,13.537,0,1,0,27.075,21.537,13.535,13.535,0,0,0,13.537,8ZM7.424,20.664A1.729,1.729,0,0,1,8,19.387L6.3,18.879a.872.872,0,0,1,.5-1.67l4.367,1.31a.873.873,0,0,1-.251,1.709c-.027,0-.06-.011-.093-.011a1.765,1.765,0,0,1,.093.448,1.749,1.749,0,0,1-3.5,0Zm9.17,8.417a4.107,4.107,0,0,0-6.119,0,.874.874,0,0,1-1.343-1.119,5.722,5.722,0,0,1,8.8,0A.872.872,0,0,1,16.594,29.081Zm4.181-10.2-1.692.508a1.742,1.742,0,1,1-2.92,1.277,1.52,1.52,0,0,1,.093-.448.538.538,0,0,1-.093.011.873.873,0,0,1-.251-1.709l4.367-1.31a.871.871,0,1,1,.5,1.67Z"
          transform="translate(0 -8)"
        />
      </svg>
    ),
  },
];

const MapSelectBox = () => {
  const dispatch = useDispatch();
  const selectedMap = useSelector((state) => state.gisMenu.selectedMap);

  const handleMapSelectBtnClick = (e) => {
    const _selectedMap = e.currentTarget.id;
    dispatch(updateMap(_selectedMap));
    setDefaultLegend(_selectedMap);
  };

  const setDefaultLegend = (selectedMap) => {
    if (selectedMap === 'flux') {
      dispatch(updateLegend('waterLevel'));
    } else if (selectedMap === 'quality') {
      dispatch(updateLegend('waterQuality'));
    } else {
      dispatch(updateLegend('nh3'));
    }
  };

  return (
    <div className="mapSelectWrap">
      <ul className="selectMenu">
        {MAP_LIST.map((map) => (
          <MapListItem
            id={map.id}
            key={map.id}
            name={map.name}
            icon={map.icon}
            selectedMap={selectedMap}
            onClick={handleMapSelectBtnClick}
          />
        ))}
      </ul>
    </div>
  );
};

export default MapSelectBox;
